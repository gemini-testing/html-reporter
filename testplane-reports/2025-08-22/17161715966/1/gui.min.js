(()=>{"use strict";var e,t,n,r={45925:(e,t,n)=>{var r=n(2784),o=n(17029),u=n(4792),i=n(82979),a=n(9249),s=n(87371),c=n(45754),l=n(11987),f=n(95058),d=n(56666),p=n(13980),m=n.n(p),v=n(78505),h=n(18717),E=n(97680),b=n(64141),g=n(50243),y=n(93941),I=n(76635),S=n(50479);function O(e){var t=R();return function(){var n,r=(0,f.Z)(e);if(t){var o=(0,f.Z)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return(0,l.Z)(this,n)}}function R(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(R=function(){return!!e})()}var Z=function(e){(0,c.Z)(n,e);var t=O(n);function n(){return(0,a.Z)(this,n),t.apply(this,arguments)}return(0,s.Z)(n,[{key:"_renderButtons",value:function(e){var t=e.sectionName,n=e.groupIndex,o=e.controls,u=this.props.actions,i=function(e,r){var i=r.value,a=o.findIndex((function(e){return e.value===i}));u.thunkRunCustomGuiAction({sectionName:t,groupIndex:n,controlIndex:a})};return(0,I.map)(o,(function(e,t){var n=e.label,o=e.value,u=e.active;return r.createElement(S.Z,{onClick:i,key:"".concat(t),value:o,content:n,active:Boolean(u)})}))}},{key:"_renderControls",value:function(e,t){switch(e){case"button":return this._renderButtons(t);case"radiobutton":return r.createElement(S.Z.Group,{key:t.sectionName},this._renderButtons(t));default:return null}}},{key:"_renderSection",value:function(e){var t=this;return this.props.customGui[e].map((function(n,r){var o=n.type,u=n.controls;return t._renderControls(o,{sectionName:e,groupIndex:r,controls:u})})).filter(Boolean).map((function(t){return r.createElement("div",{className:"custom-gui_section-controls",key:e},t)}))}},{key:"render",value:function(){var e=this,t=this.props.customGui,n=Object.keys(t).map((function(t){return e._renderSection(t)})).filter((function(e){return!(0,I.isEmpty)(e)}));return(0,I.isEmpty)(n)?null:r.createElement("div",{className:"custom-gui"},n)}}]),n}(r.PureComponent);(0,d.Z)(Z,"propTypes",{actions:m().object.isRequired,customGui:m().objectOf(m().arrayOf(m().shape({type:m().string,controls:m().arrayOf(m().shape({label:m().string,value:m().string,active:m().bool}))}))).isRequired});const w=(0,u.connect)((function(e){return{customGui:e.config.customGui}}),(function(e){return{actions:(0,h.bindActionCreators)(b,e)}}))(Z);var T=n(18553),N=n(96234),B=n(69875),C=n(57159),k=n(93150),_=Object.freeze({ALL:"All",FAILED:"Failed",CHECKED:"Checked"}),A=function(e){var t=e.actions,n=e.autoRun,o=e.isDisabled,u=e.isRunning,i=e.failedTests,a=e.checkedTests,s=(0,C.Z)("RunMode",_.FAILED),c=(0,N.Z)(s,2),l=c[0],f=c[1],p=(0,C.Z)("showCheckboxes",!1),m=(0,N.Z)(p,1)[0],v=(0,I.isEmpty)(i),h=!m||(0,I.isEmpty)(a),E=function(){return f(_.ALL)},b=function(){return!v&&f(_.FAILED)},g=function(){return!h&&f(_.CHECKED)},y=function(){return t.thunkRunAllTests()},S=function(){return t.thunkRunFailedTests({tests:i})},O=function(){return t.thunkRunSuite({tests:a})};return(0,r.useEffect)((function(){n&&y()}),[]),(0,r.useEffect)((function(){g()}),[h]),(0,r.useEffect)((function(){var e=l===_.FAILED&&v,t=l===_.CHECKED&&h;(e||t)&&f(_.ALL)}),[v,h]),r.createElement("div",{className:"run-button"},r.createElement(k.zxk,{pin:"round-clear",disabled:o,onClick:function(){var e;(0,(e={},(0,d.Z)(e,_.ALL,y),(0,d.Z)(e,_.FAILED,S),(0,d.Z)(e,_.CHECKED,O),e)[l])()},view:"action",className:"run-button__button"},u?"Running":"Run"),r.createElement(k.PhF,{pin:"clear-round",disabled:o,className:"run-button__dropdown",value:[l],onUpdate:function(e){var t;e.length&&(0,(t={},(0,d.Z)(t,_.ALL,E),(0,d.Z)(t,_.FAILED,b),(0,d.Z)(t,_.CHECKED,g),t)[e[0]])()}},r.createElement(k.PhF.Option,{value:_.ALL},"".concat(_.ALL," Tests")),r.createElement(k.PhF.Option,{value:_.FAILED,disabled:v},"".concat(_.FAILED," Tests")),r.createElement(k.PhF.Option,{value:_.CHECKED,disabled:h},"".concat(_.CHECKED," Tests"))))};A.propTypes={autoRun:m().bool.isRequired,isDisabled:m().bool,isRunning:m().bool,failedTests:m().arrayOf(m().shape({testName:m().string,browserName:m().string})).isRequired,checkedTests:m().arrayOf(m().shape({testName:m().string,browserName:m().string})).isRequired,actions:m().object.isRequired};const L=(0,u.connect)((function(e){var t=e.autoRun,n=e.tree.suites.allRootIds,r=e.processing;return{autoRun:t,isDisabled:!n.length||r,isRunning:e.running,failedTests:(0,B.getFailedTests)(e),checkedTests:(0,B.getCheckedTests)(e)}}),(function(e){return{actions:(0,h.bindActionCreators)(b,e)}}))(A);var D=n(33992),F=n(91695);function x(e){var t=j();return function(){var n,r=(0,f.Z)(e);if(t){var o=(0,f.Z)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return(0,l.Z)(this,n)}}function j(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(j=function(){return!!e})()}var M=function(e){(0,c.Z)(n,e);var t=x(n);function n(){return(0,a.Z)(this,n),t.apply(this,arguments)}return(0,s.Z)(n,[{key:"render",value:function(){var e=this.props,t=e.actions,n=e.running,o=e.stopping;return r.createElement("div",{className:"main-menu container"},r.createElement(w,null),r.createElement("div",{className:"control-container control-buttons"},r.createElement(L,null),r.createElement(T.Z,{label:"Stop tests",isDisabled:!n||o,handler:t.thunkStopTests}),r.createElement(D.Z,null),r.createElement(y.Z,null)),r.createElement(F.Z,null))}}]),n}(r.Component);(0,d.Z)(M,"propTypes",{running:m().bool.isRequired,stopping:m().bool.isRequired,actions:m().object.isRequired});const P=(0,u.connect)((function(e){return{running:e.running,stopping:e.stopping}}),(function(e){return{actions:(0,h.bindActionCreators)(b,e)}}))(M);const G=function(){return r.createElement(g.Z,null,r.createElement(P,null))};var K=n(67985),q=n(28165),J=n(86098),H=n(52505),U={BEGIN_SUITE:"beginSuite",BEGIN_STATE:"beginState",TEST_RESULT:"testResult",RETRY:"retry",ERROR:"err",END:"end",CONNECTED:"connected",DOM_SNAPSHOTS:"DOM_SNAPSHOTS"},V=n(77803),W=n(16847),z=n(4986),Y=n(36498);function Q(e){var t=X();return function(){var n,r=(0,f.Z)(e);if(t){var o=(0,f.Z)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return(0,l.Z)(this,n)}}function X(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(X=function(){return!!e})()}var $=function(e){(0,c.Z)(n,e);var t=Q(n);function n(){return(0,a.Z)(this,n),t.apply(this,arguments)}return(0,s.Z)(n,[{key:"componentDidMount",value:function(){this.props.actions.thunkInitGuiReport(),this._subscribeToEvents()}},{key:"componentWillUnmount",value:function(){this.props.actions.finGuiReport()}},{key:"_subscribeToEvents",value:function(){var e=this.props.actions,t=new EventSource("/events");t.addEventListener(U.BEGIN_SUITE,(function(t){var n=JSON.parse(t.data);e.suiteBegin(n)})),t.addEventListener(U.BEGIN_STATE,(function(t){var n=JSON.parse(t.data);e.testBegin(n)})),[U.TEST_RESULT,U.ERROR].forEach((function(n){t.addEventListener(n,(function(t){var n=JSON.parse(t.data);e.testResult(n)}))})),t.addEventListener(U.END,(function(){e.thunkTestsEnd()}))}},{key:"render",value:function(){var e=this.props,t=e.allRootSuiteIds,n=e.loading,o=e.customScripts,u=e.notifications,i=e.actions,a=r.createElement(v.ZP,{theme:v.U9,notifications:u,dismissNotification:i.dismissNotification});return t.length?r.createElement(r.Fragment,null,r.createElement(W.Z,{name:E.Dx},r.createElement(H.h,{scripts:o}),r.createElement(Y.s,null),a,r.createElement(V.Z,null),r.createElement(G,null),r.createElement("main",{className:"container"},r.createElement(J.Z,null)),r.createElement(K.Z,{active:n.active,content:n.content}),r.createElement(q.Z,null),r.createElement(z.Z,null))):r.createElement(r.Fragment,null,a,r.createElement(K.Z,{active:!0}))}}]),n}(r.Component);(0,d.Z)($,"propTypes",{loading:m().shape({active:m().bool,content:m().string}).isRequired,customScripts:m().array,notifications:m().array,actions:m().object.isRequired,allRootSuiteIds:m().array.isRequired});const ee=(0,u.connect)((function(e){var t=e.tree,n=e.loading,r=e.config.customScripts,o=e.notifications;return{allRootSuiteIds:t.suites.allRootIds,loading:n,customScripts:r,notifications:o}}),(function(e){return{actions:(0,h.bindActionCreators)(b,e)}}))($);n(43810),n(636);var te=n(41493),ne=document.getElementById("app");(0,o.s)(ne).render(r.createElement(k.f6W,{theme:"light"},r.createElement(u.Provider,{store:i.Z},r.createElement(te.n,null,r.createElement(ee,null)))))},47039:(e,t,n)=>{n.r(t),n.d(t,{getStatsFilteredByBrowsers:()=>i});var r=n(97698),o=n(76635),u=n(51869),i=(0,r.createSelector)((function(e){return e.stats}),u.getFilteredBrowsers,(function(e,t){if((0,o.isEmpty)(t)||(0,o.isEmpty)(e.perBrowser))return e.all;var n={},r=t.map((function(t){var n=t.id,r=t.versions;return(0,o.isEmpty)(r)?(0,o.keys)(e.perBrowser[n]).map((function(t){return e.perBrowser[n][t]})):r.map((function(t){return e.perBrowser[n][t]}))}));return(0,o.flatten)(r).forEach((function(e){(0,o.forEach)(e,(function(e,t){n[t]=void 0===n[t]?e:n[t]+e}))})),n}))},69875:(e,t,n)=>{n.r(t),n.d(t,{areAllRootSuitesIdle:()=>P,getAcceptableImagesByStateName:()=>g,getAcceptableOpenedImageIds:()=>R,getCheckedTests:()=>b,getFailedOpenedImageIds:()=>Z,getFailedSuiteResults:()=>F,getFailedTests:()=>E,getSelectedBrowserIds:()=>T,getSelectedImages:()=>C,getSuiteResults:()=>_,getVisibleBrowserIds:()=>w,getVisibleImages:()=>B,getVisibleRootSuiteIds:()=>k,mkGetLastImageByStateName:()=>h,mkGetTestsBySuiteId:()=>v});var r=n(76635),o=n(97698),u=n(37487),i=n(9560),a=n(14054),s=n(40645),c=n(8776),l=function(e){return e.tree.suites.stateById},f=function(e){return e.tree.browsers.allIds},d=function(e){return e.tree.browsers.stateById},p=function(e,t){var n=t.suiteId;return e.tree.suites.byId[n]},m=function(e,t){var n=t.imageId;return e.tree.images.byId[n]},v=function(){return(0,o.createSelector)(p,s.Bl,s.TZ,(function(e,t,n){return L(e,{suites:t,browsers:n}).map((function(e){return{testName:e.parentId,browserName:e.name}}))}))},h=function(){return(0,o.createSelector)(m,s.TZ,s.O7,s.Jx,j)},E=(0,o.createSelector)(s.Bl,s.TZ,s.O7,(function(e){return e.tree.suites.failedRootIds}),(function(e,t,n,o){return(0,r.flatMap)(o,(function(o){return _(e[o],{suites:e,browsers:t,results:n},r.last)})).filter((function(e){return(0,a.D8)(e)})).map((function(e){var n=e.parentId,r=t[n];return{testName:r.parentId,browserName:r.name,metaInfo:e.metaInfo}}))})),b=(0,o.createSelector)(f,s.TZ,d,(function(e,t,n){return e.filter((function(e){return n[e].checkStatus})).map((function(e){return{testName:t[e].parentId,browserName:t[e].name}}))})),g=(0,o.createSelector)(d,s.TZ,s.O7,s.Jx,(function(e,t,n,o){var u=function(e){var r=M(e,t,n);return{suiteId:r.parentId,browserName:r.name}},i=Object.keys(e).filter((function(t){return e[t].shouldBeShown})).map((function(e){return t[e]}));return(0,r.flatMap)(i,(function(e){return D(e,{results:n,images:o})})).filter(a.h3).sort((function(e,t){var n=u(e),r=n.suiteId,o=n.browserName,i=u(t),a=i.suiteId,s=i.browserName,c=r.localeCompare(a);return 0===c?o.localeCompare(s):c})).reduce((function(e,r){var u=j(r,t,n,o);if((0,a.F7)(u))return e;var i=n[r.parentId],s="".concat(i.parentId," ").concat(r.stateName);return e[s]?e[s].push(r):e[s]=[r],e}),{})})),y=(0,o.createSelector)(s.EZ,s.Bl,l,(function(e,t,n){var o=function(e){var t=n[e.id],r=t.shouldBeShown,o=t.shouldBeOpened;return r&&o},u=e.map((function(e){return t[e]})).filter(o);return(0,r.flatMap)(u,(function(e){return A(e,{suites:t},o)}))})),I=(0,o.createSelector)(y,s.TZ,d,y,(function(e,t,n){return(0,r.flatMap)(e,(function(e){return e.browserIds})).filter((function(e){var t=n[e],r=t.shouldBeShown,o=t.shouldBeOpened;return r&&o})).map((function(e){return t[e]}))})),S=(0,o.createSelector)(I,d,s.O7,(function(e,t,n){return e.map((function(e){var r=t[e.id].retryIndex,o=e.resultIds[r];return n[o]}))})),O=(0,o.createSelector)(S,s.Jx,(function(e){return e.tree.images.stateById}),(function(e,t,n){return(0,r.flatMap)(e,(function(e){return e.imageIds.filter((function(e){return n[e].shouldBeOpened})).map((function(e){return t[e]}))}))})),R=(0,o.createSelector)(O,(function(e){return e.filter(a.h3).map((function(e){return e.id}))})),Z=(0,o.createSelector)(O,(function(e){return e.filter(a.D8).map((function(e){return e.id}))})),w=(0,o.createSelector)(f,d,(function(e,t){return e.filter((function(e){return t[e].shouldBeShown}))})),T=(0,o.createSelector)(f,s.TZ,d,(function(e,t,n){return e.filter((function(e){return n[e].checkStatus===c.ri}))})),N=function(e,t,n,o,u,i){return e.map((function(e){return(0,r.last)(t[e].resultIds)})).flatMap((function(e){return n[e].imageIds.map((function(e){return o[e]})).filter((function(e){return(0,a.h3)(e)||(0,a.KD)({image:e,isLastResult:!0,isStaticImageAccepterEnabled:u,gui:i})}))}))},B=(0,o.createSelector)(w,s.TZ,s.O7,s.Jx,s.Qy,s.Fn,N),C=(0,o.createSelector)(T,s.TZ,s.O7,s.Jx,s.Qy,s.Fn,N),k=(0,o.createSelector)((function(e){return e.app.suitesPage.viewMode===u.w.FAILED?e.tree.suites.failedRootIds:e.tree.suites.allRootIds}),l,(function(e,t){return e.filter((function(e){return t[e].shouldBeShown}))}));function _(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:r.identity,o=t.suites,u=t.browsers,i=t.results;return(0,a.Et)(e,{suiteCb:function(e){return _(o[e],t,n)},browserCb:function(e){return[].concat(n(u[e].resultIds)).map((function(e){return i[e]}))}})}function A(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:r.identity;return n(e)?(0,a.Et)(e,{suiteCb:function(e){return A(t.suites[e],t,n)},browserIdsCb:function(e,t){return[t]}}):[]}function L(e,t){var n=t.suites,o=t.browsers;return e.browserIds?e.browserIds.map((function(e){return o[e]})):(0,r.flatMap)(e.suiteIds,(function(e){return L(n[e],t)}))}function D(e,t){var n=t.results,o=t.images;return e.imageIds?[].concat(e.imageIds).map((function(e){return o[e]})):(0,r.flatMap)(e.resultIds,(function(e){return D(n[e],t)}))}function F(e){var t=e.suites.failedRootIds.map((function(t){return e.suites.byId[t]})),n=(0,r.compact)((0,r.flatMap)(t,(function(t){return x(t,e.suites.byId)})));return(0,r.flatMap)(n,(function(t){return(0,a.Et)(t,{browserCb:function(t){return e.browsers.byId[t].resultIds.map((function(t){return e.results.byId[t]}))}})}))}function x(e,t){return(0,a.D8)(e)?(0,a.Et)(e,{suiteCb:function(e){return x(t[e],t)},browserIdsCb:function(e,t){return[t]}}):[]}function j(e,t,n,o){var u=M(e,t,n),i=(0,r.flatMap)(u.resultIds,(function(e){return n[e].imageIds.map((function(e){return o[e]}))}));return(0,r.findLast)(i,{stateName:e.stateName})}function M(e,t,n){return t[n[e.parentId].parentId]}var P=(0,o.createSelector)(s.EZ,s.Bl,(function(e,t){return!e.some((function(e){return!(0,i.nc)(t[e].status)}))}))},58672:()=>{},93150:(e,t,n)=>{n.d(t,{zxk:()=>o.z,Zbd:()=>u.Z,XZJ:()=>i.X,Kmg:()=>a.K,wq_:()=>s.w,pJF:()=>c.Y,h_2:()=>l.h,JO$:()=>f.J,__J:()=>d._,rUS:()=>p.r,aVo:()=>m.aV,v2r:()=>v.v2,h_i:()=>h.h,PhF:()=>E.Ph,iRW:()=>b.i,yCA:()=>g.y,rsf:()=>y.r,OK9:()=>I.OK,tdY:()=>I.td,sMk:()=>I.sM,xvT:()=>S.xv,Kx8:()=>O.Kx,oil:()=>O.oi,f6W:()=>r.f6,nwW:()=>E.nw});n(53660),n(72719);var r=n(45597),o=(n(41934),n(87759),n(31385),n(42533),n(9548),n(82286),n(22456),n(16409)),u=n(120),i=n(89763),a=(n(97492),n(99993)),s=(n(32789),n(91526)),c=(n(30256),n(91402)),l=(n(91219),n(53385)),f=(n(75539),n(11313),n(88390),n(97120)),d=n(64499),p=n(80586),m=n(95487),v=(n(59184),n(78699)),h=(n(55642),n(13199),n(38290),n(42955),n(7601),n(57299),n(15531),n(57671),n(31206),n(94338)),E=(n(21120),n(99546),n(10778),n(81874),n(41543)),b=(n(47376),n(18738),n(1790)),g=(n(71805),n(26902)),y=n(44943),I=(n(5055),n(42739),n(85859)),S=n(67027),O=(n(54977),n(21928),n(78567),n(97084),n(21868),n(19094));n(22463),n(35644),n(40650),n(82060),n(52893),n(50535),n(26256)}},o={};function u(e){var t=o[e];if(void 0!==t)return t.exports;var n=o[e]={id:e,loaded:!1,exports:{}};return r[e].call(n.exports,n,n.exports,u),n.loaded=!0,n.exports}u.m=r,e=[],u.O=(t,n,r,o)=>{if(!n){var i=1/0;for(l=0;l<e.length;l++){for(var[n,r,o]=e[l],a=!0,s=0;s<n.length;s++)(!1&o||i>=o)&&Object.keys(u.O).every((e=>u.O[e](n[s])))?n.splice(s--,1):(a=!1,o<i&&(i=o));if(a){e.splice(l--,1);var c=r();void 0!==c&&(t=c)}}return t}o=o||0;for(var l=e.length;l>0&&e[l-1][2]>o;l--)e[l]=e[l-1];e[l]=[n,r,o]},u.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return u.d(t,{a:t}),t},n=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__,u.t=function(e,r){if(1&r&&(e=this(e)),8&r)return e;if("object"==typeof e&&e){if(4&r&&e.__esModule)return e;if(16&r&&"function"==typeof e.then)return e}var o=Object.create(null);u.r(o);var i={};t=t||[null,n({}),n([]),n(n)];for(var a=2&r&&e;"object"==typeof a&&!~t.indexOf(a);a=n(a))Object.getOwnPropertyNames(a).forEach((t=>i[t]=()=>e[t]));return i.default=()=>e,u.d(o,i),o},u.d=(e,t)=>{for(var n in t)u.o(t,n)&&!u.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},u.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),u.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),u.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},u.nmd=e=>(e.paths=[],e.children||(e.children=[]),e),(()=>{var e={929:0};u.O.j=t=>0===e[t];var t=(t,n)=>{var r,o,[i,a,s]=n,c=0;if(i.some((t=>0!==e[t]))){for(r in a)u.o(a,r)&&(u.m[r]=a[r]);if(s)var l=s(u)}for(t&&t(n);c<i.length;c++)o=i[c],u.o(e,o)&&e[o]&&e[o][0](),e[o]=0;return u.O(l)},n=self.webpackChunk=self.webpackChunk||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))})(),u.O(void 0,[418,194,592,134,481],(()=>u(45925))),u.O(void 0,[418,194,592,134,481],(()=>u(87240))),u.O(void 0,[418,194,592,134,481],(()=>u(57605)));var i=u.O(void 0,[418,194,592,134,481],(()=>u(58672)));i=u.O(i)})();