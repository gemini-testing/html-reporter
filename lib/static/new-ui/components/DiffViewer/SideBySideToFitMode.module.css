.side-by-side-to-fit-mode {
    display: flex;
    justify-content: space-between;
    column-gap: 4px;
}

.image-wrapper {
    flex: var(--natural-width) 0 0;
    display: flex;
    flex-direction: column;
}

.image {
    max-height: min(
        max(var(--desired-height), calc(var(--natural-height) * 1px / 2)),
        calc(var(--natural-height) * 1px)
    );
    width: var(--img-width);
    height: var(--img-height);
}

.image-container {
    aspect-ratio: var(--natural-width) / var(--natural-height);
    max-height: max(var(--desired-height), calc(var(--natural-height) * 1px / 2));
}
